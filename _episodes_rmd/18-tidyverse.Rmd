---
title: "Introduction to the tidyverse"
teaching: 20
exercises: 10
questions:
- "How can I load data into a tibble?"
- "How can I filter (subset) data?"
objectives:
- "Objectives will go here"
keypoints:
- "Keypoints will go here"
source: Rmd
---

```{r, include=FALSE}
source("../bin/chunk-options.R")
knitr_fig_path("18-")
```

## EDIT THE VERSION IN 14-DPLYR

In this course we will focus on tabular data - such as data from a spreadsheet or a csv file.  We will focus on manipulating and exploring data using the [tidyverse](http://tidyverse.org/).  This is a collection of packages that are designed to work well together.  Although much of the tidyverse's functionality exists in base R, or in other libraries, the tidyverse provides a more modern and streamlined approach to data-analysis, and deals with some of the idiosyncracies of base R.

We can install the tidyverse like any other R package:

```{r, eval=FALSE}
install.packages("tidyverse")
```

And load the core libraries in the tidyverse with:

```{r}
library("tidyverse")
```

There are other libraries included in the tidyverse; these are less widely used, and must be loaded manually if they are required.  These won't be covered in the course. _perhaps include readxl?_

Let's dive in and look at how we can use the tidyverse to analyse and plot data from the [gapminder data](https://www.gapminder.org/).   Download the csv data from _xxx_, and take a look at it using a text editor such as notepad.   The first line contains variable names, and values are separated by commas.  Each record starts on a new line.   We use the `read_csv()` function to load data from a comma separated file:

```{r}
gapminder <- read_csv("./data/gapminder-FiveYearData.csv")
```

As we discussed in [lesson 4]({{ page.root }}/04-data-structures-part1/), variables in R can be character, integer, double, etc.   A tibble (and R's built in equivalent; the data-frame) require that all the values in a particular column have the same data type.  The `read_csv()` function will attempt to infer the data type of each column, and prints the column types it has guessed to the screen.  If the wrong column types have been generated, you can pass the `col_types=` option to `read_csv()`.  

For example, if we wanted to load `pop` as a character string, we would use:

```{r}
gapminderPopChar <- read_csv("./data/gapminder-FiveYearData.csv", 
                             col_types = cols(
                               country = col_character(),
                               year = col_integer(),
                               pop = col_character(),
                               continent = col_character(),
                               lifeExp = col_double(),
                               gdpPercap = col_double()
                             ) )
```

> # Tip
> Try reading a file using the `read_csv()` defaults (i.e. guessing column types)
> If this fails you can cut and paste the guessed column specification, and modify
> this with the correct column types.  It is good practice to do this anyway; it makes
> the data types of your columns explicit, and will help protect you if the format 
> of your data changes.
{: .callout}


## Viewing data

We can preview our data by typing the name of the tibble into the console:
```{r}
gapminder
```

In contrast to R's data frame, only a small subset of the data are shown.  We can also look at the data via the "Environment" panel in RStudio (by default this is one of the tabs in the top right window); clicking the name of the data-set (or the table icon to the right) will show the data.  
Clicking the arrow icon to the left of the name will show the attributes of the data-set.

## Include rest of dplyr lesson here
